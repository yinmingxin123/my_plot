# 📊 交互式绘图工具

一个基于 Streamlit 和 Plotly 的交互式数据可视化工具，可以轻松创建专业的折线图和散点图。

> 💡 **新手入门**: 如果你是第一次使用，建议先查看 [快速开始.md](快速开始.md)

## ✨ 功能特点

- ✅ **多格式支持**: 读取 CSV 和 Excel 文件
- ✅ **浏览器渲染**: 在浏览器中实时交互
- ✅ **多种图表**: 支持折线图和散点图
- ✅ **灵活配置**: 自由选择任意列作为 X 轴和 Y 轴
- ✅ **多曲线绘制**: 在同一图表中绘制多条曲线，共享 X 轴
- ✅ **双 Y 轴**: 独立的 Y1 轴（左侧）和 Y2 轴（右侧），便于显示不同量级的数据
- ✅ **智能轴标题**: Y 轴标题自动使用该轴选择的第一个特征名
- ✅ **网格显示**: 可选显示/隐藏网格线
- ✅ **交互缩放**: 支持鼠标拖动缩放、平移，坐标轴自动调整
- ✅ **滚轮缩放**: 鼠标悬停在 Y 轴上时可用滚轮缩放 Y 轴范围
- ✅ **纵向虚线联动**: 鼠标悬停时显示纵向虚线，同时显示所有曲线在该位置的值
- ✅ **完整数值显示**: 避免科学计数法，可自定义小数位数（0-6位）
- ✅ **WebGL 加速**: 散点图使用 WebGL 渲染，支持大数据量流畅交互
- ✅ **多图支持**: 一个页面可创建多个独立图表
- ✅ **自适应布局**: 图表尺寸自动适应页面宽度

## 🚀 快速开始

### 方式一：直接运行（开发者）

#### 安装依赖

```bash
cd E:\python_projects\my_plot
pip install -r requirements.txt
```

#### 运行应用

```bash
streamlit run app.py
```

应用会自动在浏览器中打开（默认地址：http://localhost:8501）

### 方式二：使用 exe 版本（推荐分发）

#### 打包成 exe

**方法一：使用批处理文件（Windows，推荐）**

双击 `一键打包.bat` 文件，自动完成打包

**方法二：使用命令行**

```bash
cd E:\python_projects\my_plot
pip install -r requirements_build.txt
python build_exe.py
```

#### 使用 exe

1. 进入 `dist/交互式绘图工具/` 文件夹
2. 双击 `交互式绘图工具.exe`
3. 浏览器会自动打开应用

**详细打包说明请查看：**[打包说明.md](打包说明.md)

## 📖 使用说明

### 1. 加载数据

- 点击左侧边栏的"上传CSV或Excel文件"按钮
- 选择你的数据文件（确保第一行为列名）
- 查看数据预览确认加载成功

### 2. 创建图表

1. **设置图表标题**: 为图表命名
2. **选择图表类型**: 折线图或散点图
3. **选择 X 轴**: 从下拉列表中选择作为横坐标的列
4. **选择 Y1 轴**: 在左侧框中选择要显示在左侧 Y 轴的列（可多选）
5. **选择 Y2 轴**: （可选）在右侧框中选择要显示在右侧 Y 轴的列（可多选）
6. **配置选项**:
   - 图表高度：调整图表的显示高度（300-800像素）
   - 显示网格：勾选以显示背景网格
   - 数值小数位数：选择显示的小数位数（0-6位）
7. **生成图表**: 点击"生成图表"按钮

### 3. 交互操作

- **缩放区域**: 鼠标拖动选择要放大的区域
- **滚轮缩放**: 鼠标悬停在 Y 轴上时，滚动滚轮可以缩放该 Y 轴的范围
- **平移视图**: 双击图表后拖动鼠标
- **重置视图**: 双击图表任意位置
- **联动悬停**: 鼠标悬停在图表上会显示纵向虚线，同时显示所有曲线在该横坐标位置的值
- **显示/隐藏曲线**: 点击图例中的项目
- **删除图表**: 点击图表右上角的"删除"按钮

## 📁 文件结构

```
my_plot/
├── app.py                      # 主应用程序（Streamlit）
├── launcher.py                 # exe启动器
├── build_exe.py                # 自动打包脚本
├── 一键打包.bat                # Windows一键打包（推荐）
├── 测试启动器.bat              # 测试启动器脚本
├── requirements.txt            # 运行时依赖
├── requirements_build.txt      # 打包依赖（含PyInstaller）
├── sample_data.csv             # 示例数据
├── 快速开始.md                 # ⭐ 新手入门指南
├── 使用说明_exe版本.txt        # exe用户使用说明
├── 打包说明.md                 # 开发者打包指南
└── README.md                   # 完整使用说明（本文档）
```

## 🔧 技术栈

- **Streamlit**: Web 应用框架
- **Plotly**: 交互式图表库
- **Pandas**: 数据处理
- **OpenPyXL**: Excel 文件支持

## 💡 使用技巧

1. **多曲线对比**: 在 Y1 轴或 Y2 轴中选择多列可以在同一图表中比较不同数据
2. **双 Y 轴应用**: 当不同曲线的数值范围差异较大时，将它们分别放在 Y1 轴和 Y2 轴
3. **精确缩放**: 拖动选择精确的区域进行放大查看细节
4. **滚轮微调**: 鼠标悬停在 Y 轴上时使用滚轮可以更精细地调整 Y 轴范围
5. **联动查看**: 鼠标悬停时纵向虚线会截取所有曲线，方便对比同一横坐标下的不同数值
6. **小数精度**: 根据数据特点选择合适的小数位数，太少会损失精度，太多会显得混乱
7. **数据筛选**: 通过点击图例可以临时隐藏某些曲线，便于观察其他数据
8. **多图布局**: 创建多个图表可以进行全面的数据分析
9. **智能标题**: Y 轴标题会自动使用该轴选择的第一个特征名，使图表更易读
10. **大数据散点图**: 散点图使用 WebGL 加速渲染，即使数万个点也能流畅缩放和交互

## 📋 数据格式要求

- 文件格式：CSV 或 Excel (.xlsx, .xls)
- 第一行必须为列名
- 数值列会被自动识别用于绘图
- 支持中文列名

## 🎯 示例数据

示例 CSV 格式：

```csv
时间,温度,湿度,压力
0,25.3,60.2,101.3
1,25.5,59.8,101.2
2,25.8,59.5,101.4
...
```

## 🤝 贡献

欢迎提出问题和建议！

## 📦 分发给他人

### exe 版本分发步骤

1. **打包应用**
   ```bash
   python build_exe.py
   ```

2. **测试 exe**
   - 进入 `dist/交互式绘图工具/` 
   - 双击测试是否正常运行

3. **打包文件夹**
   - 将整个 `dist/交互式绘图工具/` 文件夹压缩成 zip
   - 或者直接分享文件夹

4. **发送给他人**
   - 通过邮件、网盘等方式发送
   - 告诉对方解压后双击 exe 文件即可使用

### 用户使用要求

- ✅ 无需安装 Python
- ✅ 无需安装任何依赖
- ✅ 双击 exe 即可运行
- ⚠️ 需要保持整个文件夹完整
- ⚠️ 首次运行可能需要允许防火墙访问

## 📄 许可

MIT License

